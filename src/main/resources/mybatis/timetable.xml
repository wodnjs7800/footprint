<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.study.timetable.TimeTableMapper">
	<!-- tlist -->
	<select id="tlist" parameterType="Map"
		resultType="com.study.bookmark.BookmarkDTO">
		select * from bookmark 
		where id = #{id}
		and travelno is not null
	</select>
	<!-- flist -->
	<select id="flist" parameterType="Map"
		resultType="com.study.bookmark.BookmarkDTO">
		select * from bookmark 
		where id = #{id}
		and foodno is not null
	</select>
	<select id="plist" parameterType="int" resultType="com.study.plan.PlanDTO">
		select * from plan
		where ttid = #{ttid}
	</select>
	<!-- create -->
	<insert id="create"
		parameterType="com.study.timetable.TimeTableDTO">
		insert into timetable
		values( (select nvl(max(ttid),0)+1 from timetable ),
		#{id}, #{startdate}, #{enddate}, #{name} )
	</insert>
	<!-- list -->
	<select id="list" parameterType="Map"
		resultType="com.study.timetable.TimeTableDTO">
		select ttid, id, name, startdate, enddate, r
		from(
    		select ttid, id, name, startdate, enddate, rownum r
    		from(
    			select ttid, id, name, startdate, enddate
        		from timetable
        	where id = #{id}
    		order by ttid desc
    		)
		<![CDATA[       
         )where r >= #{sno} and r <= #{eno}
     	]]>

	</select>
	<!-- total -->
	<select id="total" resultType="int" parameterType="Map">
		select
		count(*)
		from timetable
		where id= #{id}
	</select>
	<!-- read -->
	<select id = "read" resultType="com.study.timetable.TimeTableDTO" parameterType="int">
		select * from timetable where ttid = #{ttid}
	</select>
	<!-- bread -->
	<select id = "bread" resultType="com.study.bookmark.BookmarkDTO" parameterType="String">
		select * from bookmark where id = #{id}
	</select>
	<!-- delete -->
	<delete id="delete" parameterType="int">
		delete from timetable
		where ttid = #{ttid}
	</delete>
</mapper>